# PostgreSQL Transactional Outbox - Environment Variables
# Copy this file to .env and adjust values as needed

# ==============================================
# DATABASE (PostgreSQL Container)
# ==============================================
POSTGRES_USER=outbox
POSTGRES_PASSWORD=outbox_secret
POSTGRES_DB=outbox
POSTGRES_PORT=5432

# Database URL (for application code)
DATABASE_URL=postgresql://outbox:outbox_secret@localhost:5432/outbox

# ==============================================
# OUTBOX WORKER CONFIGURATION
# ==============================================
# Number of events to process per batch
OUTBOX_BATCH_SIZE=100

# Lease duration in seconds (worker must complete within this time)
OUTBOX_LEASE_SECONDS=30

# Interval between polling cycles (ms)
OUTBOX_POLL_INTERVAL_MS=1000

# Maximum retry attempts before moving to dead letter
OUTBOX_MAX_RETRIES=5

# Number of concurrent workers (WARNING: >1 may affect ordering)
OUTBOX_CONCURRENCY=1

# ==============================================
# OBSERVABILITY (v0.5+)
# ==============================================
# Metrics prefix for Prometheus
OUTBOX_METRICS_PREFIX=outbox

# Alert webhook URL (optional)
OUTBOX_ALERT_WEBHOOK_URL=

# Lag threshold in seconds before alerting
OUTBOX_LAG_THRESHOLD_SECONDS=300

# Dead letter count threshold before alerting
OUTBOX_DLE_THRESHOLD=100

# ==============================================
# COMPLIANCE (v0.9+)
# ==============================================
# Default retention period in days
OUTBOX_RETENTION_DAYS=90

# Encryption key for payload encryption (32+ characters)
# OUTBOX_ENCRYPTION_KEY=your-32-character-encryption-key

# ==============================================
# CDC INTEGRATION (v0.8+)
# ==============================================
# Debezium connector name
# DEBEZIUM_CONNECTOR_NAME=outbox-connector

# Kafka bootstrap servers
# KAFKA_BOOTSTRAP_SERVERS=localhost:9092

# ==============================================
# MIGRATION FLAGS
# ==============================================
# Enable partitioned tables (pg_partman)
PARTITION_TABLES=true

# Enable audit triggers
ENABLE_AUDIT=true

# ==============================================
# OPENTELEMETRY (OPTIONAL)
# ==============================================
# Set to enable OpenTelemetry tracing
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
# OTEL_SERVICE_NAME=outbox-worker

# ==============================================
# DOCKER STACK PORTS (docker-compose)
# ==============================================
PROMETHEUS_PORT=9090
POSTGRES_EXPORTER_PORT=9187
GRAFANA_PORT=3001
